import{r as o,j as e}from"./index-CaOj8VRX.js";import{g as x,a as m}from"./geminiService-BP0pCGBY.js";const g=()=>{const[a,s]=o.useState([]),[d,n]=o.useState(!0);o.useEffect(()=>{(async()=>{const i=await m();s([{id:"init",text:i,sender:"ai"}]),n(!1)})()},[]);const l=o.useCallback(async r=>{if(!r.trim())return;const i={id:Date.now().toString(),text:r,sender:"user"};s(u=>[...u,i]),n(!0);const c=await x(r),t={id:(Date.now()+1).toString(),text:c,sender:"ai"};s(u=>[...u,t]),n(!1)},[]);return{messages:a,isLoading:d,sendMessage:l}},p=({message:a})=>{const s=a.sender==="user";return e.jsx("div",{className:`flex items-end ${s?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg px-4 py-3 rounded-2xl ${s?"bg-[#A3B18A] text-[#343A40] rounded-br-none":"bg-white text-[#343A40] rounded-bl-none"} shadow-sm`,children:e.jsx("p",{className:"text-base leading-relaxed break-words",children:a.text})})})},b=()=>{const{messages:a,isLoading:s,sendMessage:d}=g(),[n,l]=o.useState(""),r=o.useRef(null),i=()=>{var t;(t=r.current)==null||t.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{i()},[a,s]);const c=t=>{t.preventDefault(),!(s||!n.trim())&&(d(n),l(""))};return e.jsxs("div",{className:"container mx-auto max-w-3xl h-[calc(100vh-150px)] sm:h-[calc(100vh-160px)] flex flex-col p-2 sm:p-4",children:[e.jsxs("div",{className:"flex-grow overflow-y-auto space-y-6 pr-2",children:[a.map(t=>e.jsx(p,{message:t},t.id)),s&&e.jsx("div",{className:"flex items-end justify-start",children:e.jsx("div",{className:"max-w-sm md:max-w-md lg:max-w-lg px-4 py-3 rounded-2xl bg-white text-[#343A40] rounded-bl-none shadow-sm",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-base text-gray-500 italic",children:"Sahay is typing"}),e.jsx("span",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("span",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("span",{className:"h-2 w-2 bg-gray-400 rounded-full animate-bounce"})]})})}),e.jsx("div",{ref:r})]}),e.jsx("div",{className:"mt-auto pt-4",children:e.jsxs("form",{onSubmit:c,className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:t=>l(t.target.value),placeholder:"Type your message...",className:"w-full pl-4 pr-20 py-3 rounded-full border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#A3B18A] focus:border-transparent transition",autoFocus:!0,disabled:s}),e.jsx("button",{type:"submit",disabled:s,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-[#A3B18A] text-[#343A40] rounded-full h-10 w-10 flex items-center justify-center hover:bg-opacity-90 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed","aria-label":"Send message",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),e.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})})]})};export{b as default};
